<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Path Lifecycle ‚Äî Velsanet</title>
<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;600;700&family=Courier+Prime:wght@400;700&family=Barlow:wght@300;400;500;700&display=swap" rel="stylesheet"/>
<style>
:root{
  --bg:#030A0F;--surface:#060F17;--border:#0C1E2C;--dim:#08141E;
  --text:#C0DCF0;--muted:#254058;
  --Active:#00E5FF;--Standby:#76FF03;--Overlapping:#FFD740;--Degraded:#FF6D00;--Terminating:#FF4444;--path:#00E5FF;
}
*{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;}
body{background:var(--bg);color:var(--text);font-family:'Barlow',sans-serif;overflow-x:hidden;}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(var(--border) 1px,transparent 1px),linear-gradient(90deg,var(--border) 1px,transparent 1px);background-size:48px 48px;opacity:.3;pointer-events:none;z-index:0;}

nav{position:fixed;top:0;left:0;right:0;z-index:100;background:rgba(3,10,15,.92);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);padding:14px 48px;display:flex;justify-content:space-between;align-items:center;}
.nav-brand{font-family:'Josefin Sans',sans-serif;font-size:16px;font-weight:700;letter-spacing:5px;color:var(--text);text-decoration:none;}
.nav-brand span{color:var(--Active);}
.nav-back{font-family:'Courier Prime',monospace;font-size:10px;letter-spacing:3px;color:var(--muted);text-decoration:none;transition:color .2s;}
.nav-back:hover{color:var(--Active);}

.hero{position:relative;z-index:1;padding:130px 60px 60px;max-width:1200px;margin:0 auto;}
.hero-eyebrow{font-family:'Courier Prime',monospace;font-size:10px;letter-spacing:5px;color:var(--muted);margin-bottom:20px;display:flex;align-items:center;gap:14px;}
.hero-eyebrow::before{content:'';width:32px;height:1px;background:var(--muted);}
.hero-title{font-family:'Josefin Sans',sans-serif;font-size:clamp(40px,7vw,80px);font-weight:700;letter-spacing:4px;line-height:.95;margin-bottom:24px;text-transform:uppercase;}
.hero-title .acc{color:var(--Active);}
.hero-sub{font-size:14px;color:var(--muted);max-width:600px;line-height:1.85;border-left:2px solid var(--border);padding-left:18px;}

/* STATE MACHINE */
.states-section{position:relative;z-index:1;max-width:1200px;margin:0 auto;padding:0 60px 60px;}
.sec-label{font-family:'Courier Prime',monospace;font-size:10px;letter-spacing:5px;color:var(--muted);margin-bottom:28px;display:flex;align-items:center;gap:14px;}
.sec-label::after{content:'';flex:1;height:1px;background:var(--border);}

.state-tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:24px;}
.state-tab{padding:10px 18px;border:1px solid var(--border);border-radius:6px;cursor:pointer;font-family:'Courier Prime',monospace;font-size:10px;letter-spacing:3px;color:var(--muted);transition:all .2s;background:var(--surface);}
.state-tab.active{border-color:var(--sc);color:var(--sc);background:var(--dim);box-shadow:0 0 16px rgba(0,229,255,.08);}
.state-tab:hover:not(.active){border-color:var(--muted);}

.state-detail{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:32px;display:grid;grid-template-columns:1fr 1fr;gap:28px;border-top:2px solid var(--sc,var(--Active));}
.sd-left{}
.sd-indicator{display:flex;align-items:center;gap:12px;margin-bottom:16px;}
.sd-dot{width:14px;height:14px;border-radius:50%;background:var(--sc,var(--Active));box-shadow:0 0 12px var(--sc,var(--Active));animation:pulse 2s ease-in-out infinite;}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.6;transform:scale(.9)}}
.sd-state{font-family:'Josefin Sans',sans-serif;font-size:22px;font-weight:700;color:var(--sc,var(--Active));letter-spacing:3px;}
.sd-desc{font-size:13px;color:var(--muted);line-height:1.85;margin-bottom:16px;}
.sd-rule{background:var(--dim);border:1px solid var(--border);border-radius:8px;padding:14px 16px;font-family:'Courier Prime',monospace;font-size:11px;color:var(--sc,var(--Active));line-height:1.7;}

.sd-right{}
.sd-rows{display:flex;flex-direction:column;gap:10px;}
.sd-row{display:flex;gap:12px;font-size:12px;color:var(--muted);line-height:1.65;}
.sd-key{font-family:'Courier Prime',monospace;font-size:9px;letter-spacing:2px;color:var(--sc,var(--Active));min-width:90px;flex-shrink:0;padding-top:2px;}
.sd-transitions{margin-top:16px;padding-top:16px;border-top:1px solid var(--border);}
.sd-trans-label{font-family:'Courier Prime',monospace;font-size:9px;letter-spacing:3px;color:var(--muted);margin-bottom:10px;}
.trans-item{display:flex;align-items:center;gap:8px;font-size:11px;color:var(--muted);margin-bottom:6px;}
.trans-arrow{color:var(--sc,var(--Active));}

/* HANDOVER DEMO */
.handover-section{position:relative;z-index:1;max-width:1200px;margin:0 auto;padding:0 60px 60px;}
.handover-demo{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:36px;position:relative;overflow:hidden;}
.hd-title{font-family:'Courier Prime',monospace;font-size:10px;letter-spacing:4px;color:var(--muted);margin-bottom:28px;}

.handover-vis{display:flex;flex-direction:column;gap:12px;position:relative;}
.hv-row{display:flex;align-items:center;gap:12px;}
.hv-label{font-family:'Courier Prime',monospace;font-size:9px;letter-spacing:2px;color:var(--muted);width:100px;flex-shrink:0;text-align:right;}
.hv-track{flex:1;height:32px;background:var(--dim);border:1px solid var(--border);border-radius:4px;position:relative;overflow:hidden;}
.hv-bar{position:absolute;top:4px;bottom:4px;border-radius:3px;transition:all .5s;}
.hv-time{display:flex;justify-content:space-between;padding:0 0;font-family:'Courier Prime',monospace;font-size:8px;color:var(--muted);margin-top:8px;}

.handover-note{margin-top:20px;font-size:12px;color:var(--muted);text-align:center;font-family:'Courier Prime',monospace;letter-spacing:1px;line-height:1.7;}
.handover-note em{color:var(--Active);font-style:normal;}

.btn-simulate{display:inline-flex;align-items:center;gap:8px;background:var(--Active);color:#000;font-family:'Courier Prime',monospace;font-size:11px;font-weight:700;letter-spacing:3px;padding:12px 24px;border-radius:6px;border:none;cursor:pointer;margin-top:20px;transition:all .2s;}
.btn-simulate:hover{opacity:.85;transform:translateY(-1px);}

/* INVARIANTS */
.invariants-section{position:relative;z-index:1;max-width:1200px;margin:0 auto;padding:0 60px 80px;}
.inv-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;}
.inv-card{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:20px 22px;}
.inv-icon{font-size:22px;margin-bottom:10px;}
.inv-title{font-family:'Josefin Sans',sans-serif;font-size:13px;font-weight:700;letter-spacing:2px;margin-bottom:8px;}
.inv-desc{font-size:12px;color:var(--muted);line-height:1.75;}
.inv-lock{display:inline-flex;align-items:center;gap:6px;font-family:'Courier Prime',monospace;font-size:8px;letter-spacing:2px;padding:3px 8px;border-radius:3px;margin-top:8px;background:rgba(0,229,255,.08);color:var(--Active);border:1px solid rgba(0,229,255,.2);}

.page-footer{position:relative;z-index:1;border-top:1px solid var(--border);max-width:1200px;margin:0 auto;padding:32px 60px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:14px;}
.footer-left{font-family:'Courier Prime',monospace;font-size:10px;letter-spacing:2px;color:var(--muted);}
.footer-links{display:flex;gap:20px;}
.footer-link{font-family:'Courier Prime',monospace;font-size:10px;letter-spacing:2px;color:var(--muted);text-decoration:none;transition:color .2s;}
.footer-link:hover{color:var(--Active);}

@media(max-width:768px){
  .hero,.states-section,.handover-section,.invariants-section{padding-left:24px;padding-right:24px;}
  .state-detail,.inv-grid{grid-template-columns:1fr;}
  .page-footer{padding:24px;}
}
</style>
</head>
<body>

<nav>
  <a href="index.html" class="nav-brand">VELSA<span>NET</span></a>
  <a href="index.html" class="nav-back">‚Üê BACK TO HOME</a>
</nav>

<section class="hero">
  <div class="hero-eyebrow">WHITE PAPER #16 ¬∑ #17 ¬∑ PATH FORMATION ¬∑ LIFECYCLE</div>
  <h1 class="hero-title"><span class="acc">PATH</span><br/>LIFECYCLE</h1>
  <p class="hero-sub">
    In Velsanet, paths are not calculated ‚Äî they form.<br/>
    Once formed, they are not recalculated under change.<br/><br/>
    Paths persist as identity-bound stateful entities. Mobility is a state transition, not a re-formation. Make-before-break is the default. Lifecycle control resides exclusively in the network.
  </p>
</section>

<!-- STATE MACHINE -->
<section class="states-section">
  <div class="sec-label">PATH STATE MODEL ‚Äî CLICK EACH STATE</div>
  <div class="state-tabs" id="stateTabs"></div>
  <div class="state-detail" id="stateDetail"></div>
</section>

<!-- MAKE-BEFORE-BREAK HANDOVER -->
<section class="handover-section">
  <div class="sec-label">MAKE-BEFORE-BREAK HANDOVER SIMULATION</div>
  <div class="handover-demo">
    <div class="hd-title">DEVICE MOVES FROM CELL A ‚Üí CELL B ¬∑ NO PACKET LOSS ¬∑ NO RE-ROUTING</div>
    <div class="handover-vis">
      <div class="hv-row">
        <div class="hv-label">E2E PATH A</div>
        <div class="hv-track">
          <div class="hv-bar" id="barA" style="left:0;width:65%;background:var(--Active);opacity:.9;"></div>
        </div>
      </div>
      <div class="hv-row">
        <div class="hv-label">OVERLAP ZONE</div>
        <div class="hv-track" style="background:rgba(255,215,64,.06);border-color:var(--Overlapping)">
          <div class="hv-bar" id="barO" style="left:55%;width:20%;background:var(--Overlapping);opacity:.7;"></div>
        </div>
      </div>
      <div class="hv-row">
        <div class="hv-label">E2E PATH B</div>
        <div class="hv-track">
          <div class="hv-bar" id="barB" style="left:60%;width:40%;background:var(--Standby);opacity:.6;"></div>
        </div>
      </div>
      <div class="hv-time">
        <span>T=0</span><span>T=1 HANDOVER BEGINS</span><span>T=2 OVERLAP</span><span>T=3 PATH A RELEASED</span><span>T=4</span>
      </div>
    </div>
    <div class="handover-note">
      Path A remains <em>Active</em> while Path B is pre-formed in the target cell.<br/>
      During overlap: both paths satisfy the original constraint profile.<br/>
      Path A is released only after Path B is confirmed stable.<br/>
      <em>Zero packet loss. Zero re-routing. Zero identity revalidation.</em>
    </div>
    <button class="btn-simulate" onclick="animate()">‚ñ∂ SIMULATE</button>
  </div>
</section>

<!-- LIFECYCLE INVARIANTS -->
<section class="invariants-section">
  <div class="sec-label">LIFECYCLE INVARIANTS ‚Äî NEVER VIOLATED</div>
  <div class="inv-grid">
    <div class="inv-card" style="border-top:2px solid var(--Active)">
      <div class="inv-icon">üîí</div>
      <div class="inv-title" style="color:var(--Active)">IDENTITY BINDING</div>
      <div class="inv-desc">A path is permanently bound to the originating identity. No lifecycle operation ‚Äî mobility, reconfiguration, recovery ‚Äî may alter or re-evaluate the identity binding. The path is the identity.</div>
      <span class="inv-lock">IMMUTABLE</span>
    </div>
    <div class="inv-card" style="border-top:2px solid var(--Standby)">
      <div class="inv-icon">üìã</div>
      <div class="inv-title" style="color:var(--Standby)">CONSTRAINT PROFILE</div>
      <div class="inv-desc">The constraint profile established at path formation cannot be expanded during the lifecycle. Internal reallocation (core, plane) is permitted within bounds. Any expansion triggers termination.</div>
      <span class="inv-lock">IMMUTABLE</span>
    </div>
    <div class="inv-card" style="border-top:2px solid var(--Overlapping)">
      <div class="inv-icon">üèõÔ∏è</div>
      <div class="inv-title" style="color:var(--Overlapping)">HIERARCHY SCOPE</div>
      <div class="inv-desc">The hierarchical scope of the path ‚Äî which Q-layer domains it crosses ‚Äî is fixed at formation. No reconfiguration may introduce new peers or expand the admissible topology domain.</div>
      <span class="inv-lock">IMMUTABLE</span>
    </div>
    <div class="inv-card" style="border-top:2px solid var(--Degraded)">
      <div class="inv-icon">üóÇÔ∏è</div>
      <div class="inv-title" style="color:var(--Degraded)">LIFECYCLE RECORD</div>
      <div class="inv-desc">Every terminated path generates a lifecycle record: identity reference, all state transitions, mobility events, and termination cause. Records are retained for audit and structural verification.</div>
      <span class="inv-lock">ALWAYS RETAINED</span>
    </div>
  </div>
</section>

<footer class="page-footer">
  <div class="footer-left">VELSANET ¬∑ WHITE PAPER #16 ¬∑ #17 ¬∑ PATH LIFECYCLE</div>
  <div class="footer-links">
    <a href="index.html" class="footer-link">HOME</a>
    <a href="polyhedra.html" class="footer-link">POLYHEDRA</a>
    <a href="governance.html" class="footer-link">GOVERNANCE</a>
    <a href="whitepapers/WP17_Path_Lifecycle/Velsanet%20Path%20Lifecycle%20White%20Paper%20%2317(v1.0_202610107).pdf" class="footer-link" target="_blank">‚Üì WP17 PDF</a>
  </div>
</footer>

<script>
const states = [
  {id:'Active',color:'#00E5FF',desc:'The path is carrying traffic and satisfies all identity and constraint bindings. This is the normal operational state. All invariants are preserved. The network continuously monitors constraint compliance.',
   rule:'Traffic flows. All constraints satisfied. Identity binding intact.',
   rows:[
     {k:'TRAFFIC',v:'Path is actively carrying data'},
     {k:'MONITORING',v:'Network continuously checks constraint compliance'},
     {k:'CONTROL',v:'Path control resides exclusively in the network ‚Äî not the device'},
   ],
   transitions:[
     {to:'Standby',when:'Redundant path provisioned alongside'},
     {to:'Overlapping',when:'Mobility event detected ‚Äî handover initiated'},
     {to:'Degraded',when:'Constraint compliance partially violated'},
     {to:'Terminating',when:'Device disconnects or constraints withdrawn'},
   ]},
  {id:'Standby',color:'#76FF03',desc:'The path is reserved and synchronized but not carrying traffic. Used for hot standby or redundant path scenarios. The path is identity-bound and constraint-aligned ‚Äî ready for instant activation without identity re-evaluation.',
   rule:'Reserved. Synchronized. Not carrying traffic. Ready for activation.',
   rows:[
     {k:'PURPOSE',v:'Hot standby ¬∑ redundant path ¬∑ pre-formed for handover'},
     {k:'ACTIVATION',v:'Does not alter the original path identity'},
     {k:'CONSTRAINT',v:'Fully identity-bound and constraint-aligned in standby'},
   ],
   transitions:[
     {to:'Active',when:'Primary path fails or handover completes'},
     {to:'Overlapping',when:'Both Standby and Active simultaneously carry traffic'},
     {to:'Terminating',when:'Standby no longer required'},
   ]},
  {id:'Overlapping',color:'#FFD740',desc:'Two or more paths temporarily coexist to preserve continuity during transition. This is the make-before-break handover state. Both paths must satisfy the original constraint profile. The overlap duration is bounded ‚Äî paths must converge to a single active path.',
   rule:'Multiple paths coexist. Continuity preserved. Bounded duration.',
   rows:[
     {k:'RULE',v:'Both paths must satisfy original constraint profile'},
     {k:'DURATION',v:'Bounded ‚Äî must converge to single active path'},
     {k:'TRAFFIC',v:'Gradual migration from old path to new path'},
   ],
   transitions:[
     {to:'Active',when:'Old path released ‚Äî new path becomes sole active'},
     {to:'Terminating',when:'Overlap exceeds allowed bounds'},
   ]},
  {id:'Degraded',color:'#FF6D00',desc:'The path is operational but constraint compliance is partially violated. The network attempts recovery. Degraded state is not permanent ‚Äî recovery must occur within admissible bounds. If recovery fails, the path is terminated.',
   rule:'Operational. Constraint violation detected. Recovery in progress.',
   rows:[
     {k:'RECOVERY ORDER',v:'1) Within same plane  2) Across admissible planes'},
     {k:'CONSTRAINT',v:'Identity scope and hierarchy level remain immutable'},
     {k:'RULE',v:'Recovery may not expand admissible topology domain'},
   ],
   transitions:[
     {to:'Active',when:'Recovery successful within constraint bounds'},
     {to:'Terminating',when:'Recovery violates constraints or fails entirely'},
   ]},
  {id:'Terminating',color:'#FF4444',desc:'The path is being withdrawn and all associated resources are being released. Termination is final. The network records the full lifecycle ‚Äî identity reference, state transitions, mobility events, termination cause ‚Äî for audit and verification.',
   rule:'Withdrawal in progress. Resources releasing. Record being written.',
   rows:[
     {k:'TRIGGERS',v:'Device disconnect ¬∑ constraint withdrawal ¬∑ recovery failure'},
     {k:'RECORD',v:'Full lifecycle log retained for audit and verification'},
     {k:'FINAL',v:'No retry. No partial state. Termination is complete.'},
   ],
   transitions:[
     {to:'(end)',when:'Resources released ¬∑ lifecycle record written'},
   ]},
];

let activeState = 0;

function renderState(i) {
  activeState = i;
  const s = states[i];
  document.querySelectorAll('.state-tab').forEach((t,idx)=>{
    t.classList.toggle('active',idx===i);
    t.style.setProperty('--sc',idx===i?s.color:'var(--muted)');
  });
  document.getElementById('stateDetail').style.setProperty('--sc',s.color);
  document.getElementById('stateDetail').innerHTML = `
    <div class="sd-left">
      <div class="sd-indicator">
        <div class="sd-dot" style="background:${s.color};box-shadow:0 0 12px ${s.color}"></div>
        <div class="sd-state" style="color:${s.color}">${s.id.toUpperCase()}</div>
      </div>
      <div class="sd-desc">${s.desc}</div>
      <div class="sd-rule" style="color:${s.color}">${s.rule}</div>
    </div>
    <div class="sd-right">
      <div class="sd-rows">
        ${s.rows.map(r=>`<div class="sd-row"><div class="sd-key" style="color:${s.color}">${r.k}</div><div>${r.v}</div></div>`).join('')}
      </div>
      <div class="sd-transitions">
        <div class="sd-trans-label">TRANSITIONS TO</div>
        ${s.transitions.map(t=>`<div class="trans-item"><span class="trans-arrow" style="color:${s.color}">‚Üí</span><span style="color:${s.color};font-family:'Courier Prime',monospace;font-size:10px;letter-spacing:1px;margin-right:8px">${t.to}</span><span style="font-size:11px;color:var(--muted)">${t.when}</span></div>`).join('')}
      </div>
    </div>
  `;
}

// Build tabs
const tabsEl = document.getElementById('stateTabs');
states.forEach((s,i)=>{
  const t = document.createElement('div');
  t.className = 'state-tab' + (i===0?' active':'');
  t.style.setProperty('--sc',i===0?s.color:'var(--muted)');
  t.textContent = s.id.toUpperCase();
  t.onclick=()=>renderState(i);
  tabsEl.appendChild(t);
});
renderState(0);

// Handover animation
let animating = false;
function animate() {
  if(animating) return;
  animating = true;
  const barA = document.getElementById('barA');
  const barO = document.getElementById('barO');
  const barB = document.getElementById('barB');
  
  // Reset
  barA.style.left='0'; barA.style.width='65%'; barA.style.opacity='.9';
  barO.style.left='55%'; barO.style.width='20%'; barO.style.opacity='.7';
  barB.style.left='60%'; barB.style.width='40%'; barB.style.opacity='.6';

  setTimeout(()=>{
    // Handover starts: A extends slightly, B grows
    barA.style.width='70%';
    barB.style.left='58%'; barB.style.width='42%'; barB.style.opacity='.8';
  },500);
  setTimeout(()=>{
    // Overlap zone: both active
    barO.style.opacity='1'; barO.style.width='22%';
    barB.style.opacity='1';
  },1200);
  setTimeout(()=>{
    // A starts shrinking (releasing)
    barA.style.width='60%'; barA.style.opacity='.5';
  },2000);
  setTimeout(()=>{
    // A released
    barA.style.opacity='.2'; barA.style.width='55%';
    barO.style.opacity='.3';
    barB.style.left='0'; barB.style.width='100%';
  },2800);
  setTimeout(()=>{ animating=false; },3500);
}
</script>
</body>
</html>
